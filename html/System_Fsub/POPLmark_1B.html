<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory POPLmark_1B</title>
</head>


<body>
<div class="head">
<h1>Theory POPLmark_1B</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="POPLmark_1B.html"><span>POPLmark_1B</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="SystemFSub.html"><span>SystemFSub</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(********************* Actual formalization ************************)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_refl|fact"><span class="entity_def" id="POPLmark_1B.ty_refl|thm"><span>ty_refl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.strong_induct|fact"><span>typ.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>TyVar</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Γ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>TRec</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Γ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>SA_TRec</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Labeled_FSet.html#Labeled_FSet.lfin_values|fact"><span>lfin_values</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_single_insert|fact"><span>Diff_single_insert</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_permute|fact"><span class="entity_def" id="POPLmark_1B.ty_permute|thm"><span>ty_permute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span class="const"><span>set</span></span></a><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span class="const"><span>set</span></span></a><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Refl_TVar</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_665..671">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span class="const"><span>set</span></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span class="const"><span>set</span></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_665..671"><span>SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>ty.SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>Γ'</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.wf_concat|fact"><span class="entity_def" id="POPLmark_1B.wf_concat|thm"><span>wf_concat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.disjoint|const"><span>⊥</span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.induct|fact"><span>wf_ty.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_1016..1023">wf_Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1043..1044">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_1043..1044"><span>1</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_ty.wf_Cons</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_1016..1023"><span>wf_Cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.weaken_closed|fact"><span class="entity_def" id="POPLmark_1B.weaken_closed|thm"><span>weaken_closed</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.disjoint|const"><span>⊥</span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.wf_concat_disjoint|fact"><span class="entity_def" id="POPLmark_1B.wf_concat_disjoint|thm"><span>wf_concat_disjoint</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.disjoint|const"><span>⊥</span></a></span><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.idem|fact"><span>inf.idem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insertE|fact"><span>insertE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.inject|fact"><span>list.inject</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>15</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_empty2|fact"><span>set_empty2</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.cases|fact"><span>wf_ty.cases</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.wf_insert|fact"><span class="entity_def" id="POPLmark_1B.wf_insert|thm"><span>wf_insert</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span class="free"><span>T</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1667..1672">lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_weakening|fact"><span class="entity_def" id="POPLmark_1B.ty_weakening|thm"><span>ty_weakening</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_1667..1672"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Top</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>ty.SA_Top</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.weaken_closed|fact"><span>weaken_closed</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concat_disjoint|fact"><span>wf_concat_disjoint</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Refl_TVar</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Refl_TVar|fact"><span>ty.SA_Refl_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.weaken_closed|fact"><span>weaken_closed</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concat_disjoint|fact"><span>wf_concat_disjoint</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_2060..2066">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2095..2096">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_insert|fact"><span>wf_insert</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All.fresh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnCI|fact"><span>UnCI</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2211..2212">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All.fresh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All.IH</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnE|fact"><span>UnE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_Un|fact"><span>image_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_permute|fact"><span>ty_permute</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="POPLmark_1B.html#offset_2211..2212"><span>2</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2095..2096"><span>1</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_2060..2066"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>Γ'</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.weaken_closed|fact"><span>weaken_closed</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concat_disjoint|fact"><span>wf_concat_disjoint</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_weakening_extend|fact"><span class="entity_def" id="POPLmark_1B.ty_weakening_extend|thm"><span>ty_weakening_extend</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>[</span></a></span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>]</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Nil|fact"><span>append_Nil</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.wf_concatD|fact"><span class="entity_def" id="POPLmark_1B.wf_concatD|thm"><span>wf_concatD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.context_determ|fact"><span class="entity_def" id="POPLmark_1B.context_determ|thm"><span>context_determ</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.in_context|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.in_context|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>U'</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>;</span></span><span>  </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>U'</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>U'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair_inject|fact"><span>Pair_inject</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Nil|fact"><span>append_Nil</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_eqI|fact"><span>image_eqI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.narrow_wf|fact"><span class="entity_def" id="POPLmark_1B.narrow_wf|thm"><span>narrow_wf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3113..3117">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3185..3186">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3226..3227">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>R</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3113..3117"><span>Cons</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3226..3227"><span>1</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3226..3227"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3113..3117"><span>Cons</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3185..3186"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="comment1"><span>(* todo for A: look at this and the next *)</span></span><span>
</span><span class="comment1"><span>(* TODO: Automatically derive these from strong induction *)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3529..3534">lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.SA_AllE1|fact"><span class="entity_def" id="POPLmark_1B.SA_AllE1|thm"><span>SA_AllE1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>consumes</span></span><span> 2</span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>case_names</span></span><span> SA_Trans_TVar SA_All</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3644..3647">Top</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3726..3732">Forall</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span class="bound"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="bound"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="bound"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3529..3534"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3983..3989">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4018..4019">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>Y</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.permute_typ|const"><span class="const"><span>permute_typ</span></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap|const"><span>↔</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>10</span><span class="main"><span>,</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap_sym|fact"><span>swap_sym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4172..4177">fresh</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.FVars_typ|const"><span class="const"><span>FVars_typ</span></span></a><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>10</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.in_mono|fact"><span>in_mono</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4257..4261">same</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ_inject|fact"><span>typ_inject</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4318..4319">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>Y</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.permute_typ|const"><span class="const"><span>permute_typ</span></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap|const"><span>↔</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap_sym|fact"><span>swap_sym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All.hyps</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_4018..4019"><span>1</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3726..3732"><span>Forall</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_4257..4261"><span>same</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD2|fact"><span>iffD2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Binders/MRBNF_FP.html#MRBNF_FP.arg_cong3|fact"><span>arg_cong3</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span class="const"><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span class="const"><span>ty</span></span></a></span></span></a></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>rotated</span></span><span> -1</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.equiv|fact"><span>ty.equiv</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>supp_swap_bound</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.map_context_def|fact"><span>map_context_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend_eqvt|fact"><span>extend_eqvt</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>supp_swap_bound</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/MRBNF_FP.html#MRBNF_FP.arg_cong3|fact"><span>arg_cong3</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span class="const"><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span class="const"><span>extend</span></span></a></span></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>10</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>Swapping.bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>Swapping.supp_swap_bound</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_map_cong_id|fact"><span>context_map_cong_id</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap_simps|fact"><span>swap_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty_fresh_extend|fact"><span>ty_fresh_extend</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_4172..4177"><span>fresh</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_4318..4319"><span>x</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3983..3989"><span>SA_All</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_4257..4261"><span>same</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_3644..3647"><span>Top</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5294..5299">lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.SA_AllE2|fact"><span class="entity_def" id="POPLmark_1B.SA_AllE2|thm"><span>SA_AllE2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>consumes</span></span><span> 2</span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>case_names</span></span><span> SA_Trans_TVar SA_All</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_5409..5414">TyVar</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>U</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.in_context|const"><span>&lt;:</span></a></span><span class="bound"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.in_context|const"><span>∈</span></a></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>U</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_5533..5539">Forall</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="bound"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="bound"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5294..5299"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_5793..5799">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5828..5829">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>Y</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.permute_typ|const"><span class="const"><span>permute_typ</span></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap|const"><span>↔</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All.hyps</span></a><span class="main"><span>(</span></span><span>10</span><span class="main"><span>,</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5969..5974">fresh</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span>(</span></span><span>10</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6094..6100">fresh2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.FVars_typ|const"><span class="const"><span>FVars_typ</span></span></a><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.FVars_typ|const"><span class="const"><span>FVars_typ</span></span></a><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.in_mono|fact"><span>in_mono</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5969..5974"><span>fresh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ_inject|fact"><span>typ_inject</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.in_mono|fact"><span>in_mono</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5969..5974"><span>fresh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ_inject|fact"><span>typ_inject</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6293..6297">same</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ_inject|fact"><span>typ_inject</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6354..6355">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>Y</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="free"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.permute_typ|const"><span class="const"><span>permute_typ</span></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap|const"><span>↔</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All.hyps</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5828..5829"><span>1</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5533..5539"><span>Forall</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ_inject|fact"><span>typ_inject</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD2|fact"><span>iffD2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Binders/MRBNF_FP.html#MRBNF_FP.arg_cong3|fact"><span>arg_cong3</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span class="const"><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span class="const"><span>ty</span></span></a></span></span></a></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>rotated</span></span><span> -1</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.equiv|fact"><span>ty.equiv</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>supp_swap_bound</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.map_context_def|fact"><span>map_context_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend_eqvt|fact"><span>extend_eqvt</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>supp_swap_bound</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Binders/MRBNF_FP.html#MRBNF_FP.arg_cong3|fact"><span>arg_cong3</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span class="const"><span class="quoted"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span class="const"><span>extend</span></span></a></span></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.bij_swap|fact"><span>Swapping.bij_swap</span></a><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.supp_swap_bound|fact"><span>Swapping.supp_swap_bound</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_map_cong_id|fact"><span>context_map_cong_id</span></a><span> </span><a class="entity_ref" href="../Prelim/HOL-Library.Infinite_Typeclass.html#Infinite_Typeclass.infinite_class.infinite_UNIV|fact"><span>infinite_UNIV</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5969..5974"><span>local.fresh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Binders/Swapping.html#Swapping.swap_def|fact"><span>swap_def</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_FFVars|fact"><span>wf_FFVars</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5969..5974"><span>fresh</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_6094..6100"><span>fresh2</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_6293..6297"><span>same</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5793..5799"><span>SA_All</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_6354..6355"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_6293..6297"><span>same</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall_swapD|fact"><span>Forall_swapD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_5409..5414"><span>TyVar</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_transitivity|fact"><span class="entity_def" id="POPLmark_1B.ty_transitivity|thm"><span>ty_transitivity</span></span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_narrowing|fact"><span class="entity_def" id="POPLmark_1B.ty_narrowing|thm"><span>ty_narrowing</span></span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="entity_def" id="offset_7480..7488">ty_trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7539..7548">ty_narrow</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quoted"><span class="free"><span>R</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.strong_induct|fact"><span>typ.strong_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>TyVar</span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span>ty_trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.induct|fact"><span>ty.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8011..8012">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_8018..8026">ty_trans</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8011..8012"><span>this</span></a><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_8212..8225">SA_Trans_TVar</span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_8300..8304">True</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8325..8326">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8300..8304"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8325..8326"><span>u</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8300..8304"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8325..8326"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8300..8304"><span>True</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8018..8026"><span>ty_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8300..8304"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8325..8326"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_8972..8977">False</span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8993..8994">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8212..8225"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8972..8977"><span>False</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_8993..8994"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_9317..9323">SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9359..9360">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_9317..9323"><span>SA_All</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI1|fact"><span>UnI1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ'</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="POPLmark_1B.html#offset_9359..9360"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_9317..9323"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6-8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_Un|fact"><span>image_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_insert|fact"><span>image_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>15</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_9317..9323"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecER|fact"><span>SA_TRecER</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_refl|fact"><span>ty_refl</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.distinct|fact"><span>typ.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_set_bd_UNIV|fact"><span>context_set_bd_UNIV</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Top</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span>ty_trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_10232..10245">SA_Trans_TVar</span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_10325..10329">True</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10350..10351">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10232..10245"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.Top|const"><span class="const"><span>Top</span></span></a><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10232..10245"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10325..10329"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10350..10351"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TopE|fact"><span>SA_TopE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10232..10245"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10325..10329"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10350..10351"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_10758..10763">False</span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10779..10780">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10232..10245"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10232..10245"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10758..10763"><span>False</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_10779..10780"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_11101..11107">SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11143..11144">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11101..11107"><span>SA_All</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI1|fact"><span>UnI1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="POPLmark_1B.html#offset_11143..11144"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11101..11107"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6-8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_Un|fact"><span>image_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_insert|fact"><span>image_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>15</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11101..11107"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecER|fact"><span>SA_TRecER</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_refl|fact"><span>ty_refl</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.distinct|fact"><span>typ.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>17</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_set_bd_UNIV|fact"><span>context_set_bd_UNIV</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_11745..11748">Fun</span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.induct|fact"><span>ty.induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_11949..11953">left</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11949..11953"><span>left</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>,</span></span><span>1-5</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>SA_Top</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11949..11953"><span>left</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Arrow|fact"><span>ty.SA_Arrow</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>ty.SA_Top</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>right</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>U<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>U<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11949..11953"><span>left</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_11745..11748"><span>Fun</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Arrow|fact"><span>SA_Arrow</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12325..12326">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_12332..12340">ty_trans</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12325..12326"><span>this</span></a><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_12531..12544">SA_Trans_TVar</span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_12624..12628">True</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12649..12650">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12624..12628"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12649..12650"><span>u</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12624..12628"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12649..12650"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12624..12628"><span>True</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12332..12340"><span>ty_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12624..12628"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12649..12650"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_13314..13319">False</span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13335..13336">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_12531..12544"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_13314..13319"><span>False</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_13335..13336"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_13657..13663">SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13699..13700">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_13657..13663"><span>SA_All</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI1|fact"><span>UnI1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="POPLmark_1B.html#offset_13699..13700"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_13657..13663"><span>SA_All.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6-8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_Un|fact"><span>image_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_insert|fact"><span>image_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>15</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_13657..13663"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecER|fact"><span>SA_TRecER</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_refl|fact"><span>ty_refl</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.distinct|fact"><span>typ.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>17</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_set_bd_UNIV|fact"><span>context_set_bd_UNIV</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_14317..14323">Forall</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14360..14368">ty_trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="bound"><span>T</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>T</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_14492..14493">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14492..14493"><span>a</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14492..14493"><span>a</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.SA_AllE2|fact"><span>SA_AllE2</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_14651..14657">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14651..14657"><span>SA_All</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.SA_AllE1|fact"><span>SA_AllE1</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Trans_TVar</span><span> </span><span class="skolem"><span>Γ</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>SA_Top</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>ty.SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_14881..14887">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14914..14915">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14317..14323"><span>Forall</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14881..14887"><span>SA_All</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>3</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14317..14323"><span>Forall</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.empty_context|const"><span>∅</span></a></span></span><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="POPLmark_1B.html#offset_14881..14887"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14881..14887"><span>SA_All</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14881..14887"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.left_neutral|fact"><span>append.left_neutral</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_insert|fact"><span>image_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>15</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14317..14323"><span>Forall</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="POPLmark_1B.html#offset_14881..14887"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14914..14915"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14360..14368"><span>ty_trans</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14317..14323"><span>Forall</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14317..14323"><span>Forall</span></a><span class="main"><span>(</span></span><span>1-3</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span class="skolem"><span>X</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Y</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.strong_induct|fact"><span>ty.strong_induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_15658..15671">SA_Trans_TVar</span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_15751..15755">True</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15776..15777">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15751..15755"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15776..15777"><span>u</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15751..15755"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15776..15777"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>∀</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Forall|const"><span>.</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15751..15755"><span>True</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>8-10</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15751..15755"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_14360..14368"><span>ty_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15751..15755"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15776..15777"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_16554..16559">False</span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16575..16576">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>U</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|const"><span>closed_in</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_15658..15671"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16554..16559"><span>False</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16575..16576"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16897..16903">SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16939..16940">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty.wf_Cons|fact"><span>wf_Cons</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI1|fact"><span>UnI1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>Δ'</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span class="main"><span class="main"><span>(</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
                 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16939..16940"><span>1</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All.hyps</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16939..16940"><span>1</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All.hyps</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16939..16940"><span>1</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_16897..16903"><span>SA_All</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Δ'</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecER|fact"><span>SA_TRecER</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_refl|fact"><span>ty_refl</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.distinct|fact"><span>typ.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>17</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.context_set_bd_UNIV|fact"><span>context_set_bd_UNIV</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17666..17670">TRec</span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecEL|fact"><span>SA_TRecEL</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Y</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>T</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>SA_TRec</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>SA_Top</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_17666..17670"><span>TRec.IH</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>SA_TRec</span></a><span> </span><a class="entity_ref" href="Labeled_FSet.html#Labeled_FSet.lfin_values|fact"><span>lfin_values</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_trans|fact"><span>subset_trans</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18006..18007">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_18013..18014">*</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18006..18007"><span>this</span></a><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18013..18014"><span>*</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_18095..18096">2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.induct|fact"><span>ty.induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18215..18228">SA_Trans_TVar</span><span> </span><span class="skolem"><span>XX</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>XX</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_18302..18306">True</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18215..18228"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> Γ </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>U</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18302..18306"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18215..18228"><span>SA_Trans_TVar</span></a><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18095..18096"><span>2</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18013..18014"><span>*</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>R</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>T</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18302..18306"><span>True</span></a><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18215..18228"><span>SA_Trans_TVar.hyps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18302..18306"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_18215..18228"><span>SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> Γ </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_single_insert|fact"><span>Diff_single_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_commute|fact"><span>insert_commute</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.narrow_wf|fact"><span>narrow_wf</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>ty.SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecER|fact"><span>SA_TRecER</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_refl|fact"><span>ty_refl</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.distinct|fact"><span>typ.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>17</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_7480..7488"><span>ty_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_7539..7548"><span>ty_narrow</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.narrow_wf|fact"><span>narrow_wf</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19843..19848">lemma</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_narrowing_aux|fact"><span class="entity_def" id="POPLmark_1B.ty_narrowing_aux|thm"><span>ty_narrowing_aux</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_19877..19885">ty_trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Γ</span></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="bound"><span>T</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>T</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="bound"><span>T</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20036..20037">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ty|const"><span>ok</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_19843..19848"><span>assms</span></a><span class="main"><span>(</span></span><span>2-3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.narrow_wf|fact"><span>narrow_wf</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_19843..19848"><span>assms</span></a><span class="main"><span>(</span></span><span>2-3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_20036..20037"><span>1</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Δ</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.induct|fact"><span>ty.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_20241..20254">SA_Trans_TVar</span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="skolem"><span>T</span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_20316..20320">True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_20241..20254"><span>SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_20241..20254"><span>SA_Trans_TVar</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_20316..20320"><span>True</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.context_determ|fact"><span>context_determ</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set_intros|fact"><span>list.set_intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Trans_TVar|fact"><span>ty.SA_Trans_TVar</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_19877..19885"><span>ty_trans</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening|fact"><span>ty_weakening</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_weakening_extend|fact"><span>ty_weakening_extend</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_ConsE|fact"><span>wf_ConsE</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.wf_concatD|fact"><span>wf_concatD</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_20241..20254"><span>SA_Trans_TVar</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_All</span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.Cons_eq_appendI|fact"><span>Cons_eq_appendI</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.narrow_wf|fact"><span>narrow_wf</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>ty.SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.wf_context|fact"><span>wf_context</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_TRec</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>ty.SA_TRec</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_narrowing|fact"><span>ty_narrowing</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.intros|fact"><span>ty.intros</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_transitivity2|fact"><span class="entity_def" id="POPLmark_1B.ty_transitivity2|thm"><span>ty_transitivity2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Binders/Tools/binder_induction.ML.html#MRBNF_Recursor.binder_induction|method"><span class="operator"><span>binder_induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span> </span><span class="quasi_keyword"><span>avoiding</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.dom|const"><span class="const"><span>dom</span></span></a><span> </span><span class="free"><span>Γ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.strong_induct|fact"><span>typ.strong_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>TyVar</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TyVar|const"><span class="const"><span>TyVar</span></span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21176..21179">Fun</span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="skolem"><span>x2</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21176..21179"><span>Fun</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>T</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Top</span><span> </span><span class="skolem"><span>Γ</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_21337..21342">outer</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>SA_Arrow</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21337..21342"><span>outer</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.Fun|const"><span>→</span></a></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21456..21464">SA_Arrow</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>U<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>R<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>U<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Arrow|fact"><span>ty.SA_Arrow</span></a><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21176..21179"><span>Fun</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21456..21464"><span>SA_Arrow</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>6</span><span class="main"><span class="main"><span>,</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21176..21179"><span>Fun</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21456..21464"><span>SA_Arrow</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>,</span></span></span><span>7</span><span class="main"><span class="main"><span>,</span></span></span><span>8</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.typ.inject|fact"><span>typ.inject</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21691..21697">Forall</span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21691..21697"><span>Forall</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.SA_AllE2|fact"><span>SA_AllE2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_21793..21798">outer</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21793..21798"><span>outer</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.SA_AllE1|fact"><span>SA_AllE1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>SA_Trans_TVar</span><span> </span><span class="skolem"><span>Γ</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_All|fact"><span>SA_All</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>SA_Top</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22005..22011">SA_All</span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_narrowing_aux|fact"><span>ty_narrowing_aux</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> Δ</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.simps|fact"><span>append.simps</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21691..21697"><span>Forall</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21691..21697"><span>Forall</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_22005..22011"><span>SA_All</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>T<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="skolem"><span>S<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_21691..21697"><span>Forall</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_22005..22011"><span>SA_All</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>3</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22378..22382">TRec</span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>Γ</span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="skolem"><span>T</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_22378..22382"><span>TRec</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>Γ</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="SystemFSub.html#SystemFSub.TRec|const"><span class="const"><span>TRec</span></span></a><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.SA_TRecEL|fact"><span>SA_TRecEL</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Y</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>T</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>SA_TRec</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_Top|fact"><span>SA_Top</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.well_scoped|fact"><span>well_scoped</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#offset_22378..22382"><span>TRec.IH</span></a><span> </span><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty.SA_TRec|fact"><span>SA_TRec</span></a><span> </span><a class="entity_ref" href="Labeled_FSet.html#Labeled_FSet.lfin_values|fact"><span>lfin_values</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_trans|fact"><span>subset_trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="POPLmark_1B.ty_narrowing2|fact"><span class="entity_def" id="POPLmark_1B.ty_narrowing2|thm"><span>ty_narrowing2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Γ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.extend|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.concat|const"><span><span class="hidden">❙</span><b>,</b></span></a></span><span> </span><span class="free"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>⊢</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="SystemFSub.html#SystemFSub.ty|const"><span>&lt;:</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_narrowing_aux|fact"><span>ty_narrowing_aux</span></a><span> </span><a class="entity_ref" href="POPLmark_1B.html#POPLmark_1B.ty_transitivity2|fact"><span>ty_transitivity2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>